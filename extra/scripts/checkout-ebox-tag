#!/bin/bash

BASEURL=https://svn.ebox-platform.com/ebox-platform/
TAGSURL=$BASEURL/tags/

TAG=$1

TAGDIR=$(echo $TAG | grep -o "[[:digit:]]\+.[[:digit:]]\+")-series
URL=$TAGSURL/$TAGDIR/$TAG

if [ -z "$TAG" ]
then
    echo "Usage: checkout-ebox-tag <tag>"
    exit 1
fi

svn co $URL source/

if [ ! -f source/client/ebox/configure.ac ]
then
    echo "Unable to checkout code from $URL"
    exit 1
fi

exit 0
